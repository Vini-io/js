(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["towers"],{"03b6":function(e,t,a){},"054c":function(e,t,a){},"066d":function(e,t,a){},2148:function(e,t,a){},2331:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition-group",{staticClass:"towers-rounds",attrs:{tag:"div",name:"switch"}},e._l(e.game.totalRounds,(function(t){return a("div",{key:t+"-"+e.game.difficulty,class:["towers-round","running"===e.game.status&&e.game.currentRound===e.game.totalRounds-t&&"towers-round-current"]},[null!=e.getMultiplier(t)?a("div",{staticClass:"towers-winnings"},[e._v(" x"+e._s(e.getMultiplier(t))+" ")]):e._e(),a("div",{staticClass:"towers-choices"},e._l(e.difficultyData.choices,(function(i){return a("Choice",{key:e.difficultyData.key+"-"+i,attrs:{choice:i-1,round:e.game.totalRounds-t,gameCurrentRound:e.game.currentRound,gameStatus:e.game.status,difficulty:e.game.difficulty,gameRound:e.game.rounds[e.game.totalRounds-t],isBetLoading:e.isBetLoading&&e.game.totalRounds-t===e.game.currentRound,betAmountPayout:e.getPayout(t)},on:{submitBet:e.onSubmitBet}})})),1)])})),0)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseButton",{class:[e.isChoiceSelected&&"selected",e.isChoiceBomb&&"bomb",e.isChoiceTower&&"tower"],attrs:{loading:e.isBetLoading},on:{click:e.emitClick}},[a("transition",{attrs:{name:"slide",mode:"out-in"}},[e.shouldShowBalanceCounter?a("BalanceCounter",{key:"counter-"+e.choice+"-"+e.round,attrs:{value:e.counterValue,hideCurrencyText:!0,transition:!1}}):a("div",{key:"icon-"+e.choice+"-"+e.round},[e.isChoiceTower?a("TowerIcon"):e._e(),e.isChoiceBomb?a("BombIcon"):e._e()],1)],1)],1)},o=[],r=a("0bae"),l=a("bdeb"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseIcon",{staticClass:"tower-icon"},[a("svg",{attrs:{viewBox:"0 0 47 47",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M37.7572 11.3197C38.331 10.746 38.331 9.81657 37.7572 9.24284C37.1835 8.66911 36.2541 8.66911 35.6803 9.24284L31.8822 13.0409L29.9832 11.1418C28.8372 9.99438 26.9753 9.99438 25.8293 11.1418L24.3606 12.6106C24.2448 12.7264 24.1491 12.8537 24.0567 12.9825C22.0612 12.1966 19.8961 11.75 17.625 11.75C7.90674 11.75 0 19.6567 0 29.375C0 39.0933 7.90674 47 17.625 47C27.3433 47 35.25 39.0933 35.25 29.375C35.25 27.1039 34.8035 24.9387 34.0175 22.9433C34.1462 22.8508 34.2736 22.7552 34.3894 22.6394L35.8582 21.1707C37.0056 20.0239 37.0056 18.1636 35.8582 17.0168L33.9591 15.1178L37.7572 11.3197ZM17.625 20.5625C12.7655 20.5625 8.8125 24.5155 8.8125 29.375C8.8125 30.1861 8.15487 30.8438 7.34375 30.8438C6.53263 30.8438 5.875 30.1861 5.875 29.375C5.875 22.8962 11.1462 17.625 17.625 17.625C18.4361 17.625 19.0938 18.2826 19.0938 19.0938C19.0938 19.9049 18.4361 20.5625 17.625 20.5625Z"}}),a("path",{attrs:{d:"M42.1366 13.6759C41.5629 13.1022 40.6334 13.1022 40.0597 13.6759C39.486 14.2496 39.486 15.1791 40.0597 15.7528L41.5284 17.2216C41.8153 17.5084 42.1911 17.6519 42.5669 17.6519C42.9428 17.6519 43.3186 17.5084 43.6054 17.2216C44.1792 16.6478 44.1792 15.7184 43.6054 15.1446L42.1366 13.6759Z"}}),a("path",{attrs:{d:"M31.2472 6.9403C31.5341 7.22717 31.9099 7.37065 32.2857 7.37065C32.6615 7.37065 33.0373 7.22717 33.3242 6.9403C33.8979 6.36657 33.8979 5.43713 33.3242 4.8634L31.8554 3.39465C31.2817 2.82092 30.3523 2.82092 29.7785 3.39465C29.2048 3.96838 29.2048 4.89782 29.7785 5.47155L31.2472 6.9403Z"}}),a("path",{attrs:{d:"M36.7188 5.875C37.5306 5.875 38.1875 5.21737 38.1875 4.40625V1.46875C38.1875 0.657633 37.5306 0 36.7188 0C35.9069 0 35.25 0.657633 35.25 1.46875V4.40625C35.25 5.21737 35.9069 5.875 36.7188 5.875Z"}}),a("path",{attrs:{d:"M45.5312 8.86629H42.5938C41.7819 8.86629 41.125 9.52393 41.125 10.335C41.125 11.1462 41.7819 11.8038 42.5938 11.8038H45.5312C46.3431 11.8038 47 11.1462 47 10.335C47 9.52393 46.3431 8.86629 45.5312 8.86629Z"}}),a("path",{attrs:{d:"M40.1134 6.9403C40.4003 7.22717 40.7761 7.37065 41.1519 7.37065C41.5277 7.37065 41.9035 7.22717 42.1904 6.9403L45.1279 4.0028C45.7016 3.42907 45.7016 2.49963 45.1279 1.9259C44.5542 1.35217 43.6247 1.35217 43.051 1.9259L40.1135 4.8634C39.5397 5.43713 39.5397 6.36657 40.1134 6.9403Z"}})])])},c=[],d=a("2877"),h={},m=Object(d["a"])(h,u,c,!1,null,"32a2b286",null),g=m.exports,p={name:"Choice",components:{BalanceCounter:r["a"],TowerIcon:l["a"],BombIcon:g},props:{choice:Number,round:Number,gameCurrentRound:Number,gameRound:Object,gameStatus:String,betAmountPayout:Number,isBetLoading:Boolean},computed:{counterValue(){var e;return(null===(e=this.gameRound)||void 0===e?void 0:e.payout)||(null===this||void 0===this?void 0:this.betAmountPayout)},isChoiceSelected(){var e;return(null===(e=this.gameRound)||void 0===e?void 0:e.choice)===this.choice},isChoiceBomb(){var e;return("ended"===this.gameStatus||this.gameCurrentRound>this.round)&&1===(null===(e=this.gameRound)||void 0===e||null===(e=e.bombs)||void 0===e?void 0:e[this.choice])},isChoiceTower(){var e;return("ended"===this.gameStatus||this.gameCurrentRound>this.round)&&1!==(null===(e=this.gameRound)||void 0===e||null===(e=e.bombs)||void 0===e?void 0:e[this.choice])},shouldShowBalanceCounter(){return"running"===this.gameStatus&&this.round===this.gameCurrentRound}},methods:{emitClick(){if(this.round===this.gameCurrentRound&&"running"===this.gameStatus)return this.$emit("submitBet",{choice:this.choice,round:this.round})}}},v=p,f=(a("4030"),Object(d["a"])(v,n,o,!1,null,"c92d1740",null)),B=f.exports,y={name:"TowerRounds",components:{Choice:B,BalanceCounter:r["a"]},props:{game:Object,difficultyData:Object,isBetLoading:Boolean,winningsByRound:Array},methods:{onSubmitBet(e){this.$emit("submitBet",e)},getRoundDetails(e){var t,a;return null===(t=this.winningsByRound)||void 0===t?void 0:t[(null===(a=this.game)||void 0===a?void 0:a.totalRounds)-e]},getMultiplier(e){const t=this.getRoundDetails(e);return null===t||void 0===t?void 0:t.multiplier},getPayout(e){const t=this.getRoundDetails(e);return null===t||void 0===t?void 0:t.value}}},b=y,w=(a("5f09"),Object(d["a"])(b,i,s,!1,null,"9f5cd3ba",null));t["a"]=w.exports},"25fa":function(e,t,a){},3273:function(e,t,a){"use strict";a("b6c8")},"3c8c":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("InputField",{ref:"input",staticClass:"bet-input",class:[e.types,e.autoVertical&&"is-vertical",e.inlineTopBar&&"has-inline-topbar"],attrs:{label:e.label}},[!e.inlineTopBar&&e.isLoggedIn?a("div",{staticClass:"top-bar"},[e._t("info"),!e.hideDropdown&&e.withBalanceSelectionModal?a("BalanceSelectionModal",{attrs:{allowedBalances:e.allowedBalances,forceBalance:e.forceBalance}}):e.hideDropdown?e._e():a("BalanceDropdown",{attrs:{align:e.dropdownAlign,direction:e.dropdownDirection,allowedBalances:e.allowedBalances,forceBalance:e.forceBalance}})],2):e._e(),e.isLoggedIn||e.forceDisplay?a("BaseInput",e._b({ref:"inputField",attrs:{numeric:!0,decimals:e.decimals,min:"0",value:e.decimalValue,label:e.amountLabel},on:{blur:e.handleInputBlur,input:e.setValue,focus:function(e){return e.target.select()}},scopedSlots:e._u([e.hasInputIconLeft?{key:"iconLeft",fn:function(){return[e._t("inputIconLeft")]},proxy:!0}:null,e.inlineTopBar?{key:"pre",fn:function(){return[e.hideDropdown?e._e():a("div",{staticClass:"top-bar"},[e._t("info"),e.withBalanceSelectionModal?a("BalanceSelectionModal",{attrs:{allowedBalances:e.allowedBalances,forceBalance:e.forceBalance}}):a("BalanceDropdown",{attrs:{align:e.dropdownAlign,direction:e.dropdownDirection,allowedBalances:e.allowedBalances,forceBalance:e.forceBalance}})],2)]},proxy:!0}:null],null,!0)},"BaseInput",e.inputLimits,!1),[e.inputBalanceType?[a("div",{staticClass:"input-balance-type"},[e._v(" "+e._s(e.currentBalType)+" ")])]:e._e(),e.clear?[a("BaseButton",{attrs:{types:"is-small is-pink"},on:{click:function(t){return e.clearValue()}}},[e._v("C")])]:e._e(),e.multiply?[a("BaseButton",{class:[e.responsiveButtons&&"hide-below-tablet"],attrs:{types:"is-small is-pink"},on:{click:function(t){return e.multiplyValue(.5)}}},[e._v("1/2")]),a("BaseButton",{class:[e.responsiveButtons&&"hide-below-tablet"],attrs:{types:"is-small is-pink"},on:{click:function(t){return e.multiplyValue(2)}}},[e._v("2Ã—")])]:e._e(),e.add?e._l(e.addButtons,(function(t){return a("BaseButton",{key:t.value,class:[e.responsiveButtons&&"hide-below-tablet"],attrs:{types:"is-small is-pink"},on:{click:function(a){return e.addValue(t.value)}}},[e._v("+"+e._s(t.shortValue))])})):e._e(),e.max?[a("BaseButton",{attrs:{types:"is-small is-pink"},on:{click:e.maxValue}},[e._v("M")])]:e._e(),e.shouldShowSlider?a("div",{staticClass:"slider-container"},[a("div",{staticClass:"slider-percent"},[e._v(" "+e._s(e.sliderPercent)+"% ")]),a("vue-slider",{attrs:{value:e.sliderValue,max:e.sliderMaxBet,interval:e.sliderInterval,silent:!0,tooltip:"none","tooltip-placement":"bottom"},on:{change:e.handleSliderInput}})],1):e._e()],2):a("NavbarLink",{staticClass:"login-button",attrs:{to:"/auth/login"}},[a("BaseButton",{attrs:{types:"is-pink"},scopedSlots:e._u([{key:"iconLeft",fn:function(){return[a("RemixIcon",{attrs:{icon:"login-circle"}})]},proxy:!0}])},[e._v(" "+e._s(e.$t("navbar.login"))+" ")])],1)],1)},s=[],n=(a("14d9"),a("901e")),o=a.n(n),r=a("b5ae"),l=a("9899"),u=a("0b64"),c=a("b763"),d=a("1242"),h=a("2f62"),m=a("c276"),g=a("2912"),p=a("85b1"),v=a("56f9"),f=a("4971"),B=a.n(f);a("03b6");const y=3;var b={components:{BalanceDropdown:u["a"],BalanceSelectionModal:c["a"],NavbarLink:v["a"],VueSlider:B.a},props:{dropdownDirection:{type:String,default:d["b"].Down},dropdownAlign:{type:String,default:d["a"].Left},hideDropdown:{type:Boolean,default:!1},minBetBux:{type:Number,default:10},maxBetBux:{type:Number,default:void 0},useMaxBetAsMax:{type:Boolean,default:!1},inputBalanceType:{type:Boolean,default:!1},multiply:{type:Boolean,default:!0},clear:{type:Boolean,default:!0},max:{type:Boolean,default:!0},add:{type:Boolean,default:!0},allowedBalances:Array,forceBalance:String,mainCurrency:String,label:{type:String,default:void 0},amountLabel:{type:String,default:void 0},types:[String,Array,Object],layout:{type:String,default:"auto"},responsiveButtons:{type:Boolean,default:!1},shouldShowSlider:{type:Boolean,default:!1},initialValue:{type:[Number,String],default:0},withBalanceSelectionModal:{type:Boolean,default:!1},forceDisplay:{type:Boolean,default:!1}},data(){return{value:0,autoVertical:!1,inlineTopBar:!1}},validations(){return{value:{minValue:Object(l["d"])({path:"error.min_bet_value",args:{n:this.minBetBux.toLocaleString()}},Object(r["minValue"])(this.minBetBux)),required:Object(l["d"])("error.bet_amount_required",r["required"])}}},computed:{...Object(h["e"])("user",["conversionBalanceType","balances"]),...Object(h["e"])("user",{storeBalanceType:"balanceType"}),...Object(h["c"])("user",{balance:"convertedBalance",isLoggedIn:"isLoggedIn"}),...Object(h["c"])("user",{buxBalance:"buxBalance"}),addButtons(){let e=Math.max(10/Math.pow(10,this.decimals),Object(m["e"])(this.maxBetConverted||0)/1e3);"rub"===this.currentBalType&&(e*=10);const t=[];for(let a=0;a<y;a++){const i=e*Math.pow(10,a);t.push({value:i,v:i,shortValue:Object(m["i"])(i)})}return t},inputLimits(){const e={};return e.min=this.minBet,(this.balance||this.maxBetConverted)&&(e.max=this.balance&&this.maxBetConverted?Math.min(this.balance,this.maxBetConverted):this.balance||this.maxBetConverted),e},decimalValue(){return this.value},decimals(){var e;return null!==(e=g["b"][this.currentBalType])&&void 0!==e?e:0},currentBalanceValue(){return this.forceBalance?this.balances[this.forceBalance]:this.balances[this.storeBalanceType]},maxBet(){var e;const t=null!==(e=this.maxBetBux)&&void 0!==e?e:this.currentBalanceValue;return null==t?null:t},minBet(){return null==this.minBetBux?null:this.minBetBux},maxBetConverted(){return this.convertToCurrentBalanceType(this.maxBet)},minBetConverted(){return this.convertToCurrentBalanceType(this.minBet)},currentBalType(){return this.conversionBalanceType||this.balanceType},balanceType(){let e=this.storeBalanceType;return this.isAllowedBalance(e)||(e=this.getAllowedBalance()),e},sliderMaxBet(){return Math.min(this.maxBetConverted,this.balance)},sliderInterval(){return"bux"!==this.currentBalType?.01:1},sliderValue(){return this.value<=this.sliderMaxBet?this.value:this.sliderMaxBet},hasInputIconLeft(){return void 0!==this.$slots.inputIconLeft},sliderPercent(){return this.sliderMaxBet?parseInt(this.sliderValue/this.sliderMaxBet*100):0}},mounted(){if("auto"===this.layout&&this.handleResize(),this.layout.indexOf("vert")>=0?this.autoVertical=!0:this.layout.indexOf("horiz")>=0&&(this.autoVertical=!1),this.layout.indexOf("inline")>=0&&(this.inlineTopBar=!0),this.initialValue){if("usd"===this.mainCurrency&&"usd"===this.conversionBalanceType)return this.setValue(parseFloat(this.initialValue));this.setValue(this.convertToCurrentBalanceType(parseFloat(this.initialValue)))}},created(){"auto"===this.layout&&window.addEventListener("resize",this.debouncedResize)},destroyed(){window.removeEventListener("resize",this.debouncedResize)},watch:{conversionBalanceType(e,t){e!==t&&this.setValue(0)},balanceType(e,t){e!==t&&this.setValue(0)},decimalValue(){if(this.mainCurrency&&this.mainCurrency===this.currentBalType)return this.$emit("input",{balanceType:this.balanceType,mainCurrency:this.mainCurrency,amount:this.decimalValue});let e=g["a"].amount(this.decimalValue).from(this.currentBalType).to("bux");if(e>this.balances[this.balanceType]){const t=this.decimalValue-1/g["b"].getBase(this.currentBalType),a=this.balances[this.balanceType];g["a"].amount(t).from(this.currentBalType).to(this.balanceType)<=a&&(e=a)}this.$emit("input",{balanceType:this.balanceType,amount:e})}},methods:{handleInputBlur(){this.checkLimits()},checkLimits(){this.maxBet>0&&this.value>this.maxBetConverted?this.value=this.maxBetConverted:this.minBet>=0&&this.value>0&&this.value<this.minBetConverted?this.value=this.minBetConverted:this.value<0&&(this.value=0)},addValue(e){let t=new o.a(this.value).plus(e);t=this.decimals>0?t.dp(this.decimals):t.dp(0),this.value=t.valueOf(),this.checkLimits()},multiplyValue(e){let t=new o.a(this.value).times(e);t=this.decimals>0?t.dp(this.decimals):t.dp(0),this.value=t.valueOf(),this.checkLimits()},setValue(e){if(e){let t=new o.a(e);this.decimals>0&&(t=t.dp(this.decimals)),this.value=t.valueOf()}else this.value=0},clearValue(){this.value=0,this.checkLimits()},maxValue(){if(this.useMaxBetAsMax)this.value=this.convertToCurrentBalanceType(this.maxBetBux);else{let e=new o.a(this.currentBalanceValue);e=this.decimals>0?e.dp(this.decimals):e.dp(0),this.value=this.convertToCurrentBalanceType(e.valueOf())}this.checkLimits()},convertToCurrentBalanceType(e){return g["a"].amount(e,{roundingMode:"floor"}).decimal().from(this.balanceType).to(this.currentBalType)},convertFromCurrentBalanceType(e){let t=g["a"].amount(e).from(this.currentBalType).to(this.balanceType);return t},isAllowedBalance(e){var t;if(this.forceBalance&&this.forceBalance!==e)return!1;const a=(null===(t=this.allowedBalances)||void 0===t?void 0:t.length)>0;return!a||this.allowedBalances.indexOf(e)>=0},getAllowedBalance(e){var t;return this.forceBalance?this.forceBalance:(null===(t=this.allowedBalances)||void 0===t?void 0:t.length)>0?this.allowedBalances[0]:null},debouncedResize:Object(p["a"])((function(){this.handleResize()}),600),handleResize(){var e,t;if("auto"!==this.layout)return;const a=null===(e=this.$refs)||void 0===e||null===(e=e.input)||void 0===e||null===(e=e.$el)||void 0===e?void 0:e.getBoundingClientRect();null===(t=this.$refs)||void 0===t||null===(t=t.inputField)||void 0===t||null===(t=t.$el)||void 0===t||t.getBoundingClientRect();if(!a)return;const i=window.outerWidth;a.width>i/4.5||i<768?(this.autoVertical=!0,this.inlineTopBar=!0):(this.autoVertical=!1,this.inlineTopBar=!0)},handleSliderInput(e){this.value=e}}},w=b,C=(a("565c"),a("2877")),S=Object(C["a"])(w,i,s,!1,null,"c9477256",null);t["a"]=S.exports},4030:function(e,t,a){"use strict";a("054c")},"565c":function(e,t,a){"use strict";a("25fa")},"5f09":function(e,t,a){"use strict";a("066d")},"92cf":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseModal",e._g(e._b({staticClass:"seed-pair-modal",attrs:{open:e.open}},"BaseModal",e.$attrs,!1),e.$listeners),[a("BaseCard",[a("BaseCardHeader",[a("div",{directives:[{name:"t",rawName:"v-t",value:"seedPair.modal.title",expression:"'seedPair.modal.title'"}]}),a("IconButton",{attrs:{icon:"external-link",name:"fairness"},on:{click:e.handlePFClick}})],1),a("BaseTooltip",{attrs:{to:"fairness"}},[a("span",{directives:[{name:"t",rawName:"v-t",value:"plinko.fairness",expression:"'plinko.fairness'"}]})]),a("BaseCardContent",[a("InputGroup",{staticClass:"seed-pair-modal-section"},[a("InputField",{attrs:{label:{path:"seedPair.modal.nextGameSeed",args:{nonce:e.seedPair.nonce}}}},[a("BaseInput",{attrs:{readOnly:!0},model:{value:e.seedPair.nextGameSeed,callback:function(t){e.$set(e.seedPair,"nextGameSeed",t)},expression:"seedPair.nextGameSeed"}})],1),a("InputField",{attrs:{label:"seedPair.modal.activeServer"}},[a("BaseInput",{attrs:{readOnly:!0},model:{value:e.serverHash,callback:function(t){e.serverHash=t},expression:"serverHash"}})],1),e.isUserSeed?a("InputField",{attrs:{label:"seedPair.modal.nextServer"}},[a("BaseInput",{attrs:{readOnly:!0},model:{value:e.nextServerHash,callback:function(t){e.nextServerHash=t},expression:"nextServerHash"}})],1):e._e(),e.isUserSeed?e._e():a("InputField",{attrs:{label:"seedPair.modal.currentGameVersion"}},[a("BaseInput",{attrs:{readOnly:!0},model:{value:e.gameVersion,callback:function(t){e.gameVersion=t},expression:"gameVersion"}})],1)],1),a("InputGroup",{staticClass:"seed-pair-modal-section"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"seedPair.modal.clientSeeds",expression:"'seedPair.modal.clientSeeds'"}],staticClass:"seed-pair-rotate-pair-title"}),a("InputField",{attrs:{label:"seedPair.modal.activeClient"}},[a("BaseInput",{attrs:{readOnly:!0},model:{value:e.seedPair.clientSeed,callback:function(t){e.$set(e.seedPair,"clientSeed",t)},expression:"seedPair.clientSeed"}})],1),a("InputField",{attrs:{label:"seedPair.modal.nextClient"}},[a("div",{staticClass:"seed-pair-new-pair"},[a("BaseInput",{model:{value:e.nextClientSeed,callback:function(t){e.nextClientSeed=t},expression:"nextClientSeed"}}),a("BaseButton",{directives:[{name:"t",rawName:"v-t",value:"seedPair.modal.rotatePairButton",expression:"'seedPair.modal.rotatePairButton'"}],attrs:{types:"is-pink",loading:e.isRotateLoading},on:{click:e.rotateSeed}})],1)])],1),e.isError?a("BaseNotification",{attrs:{types:"is-danger"}},[a("div",{staticClass:"error-title"},[e._v(" "+e._s(e.errorMessage)+" ")]),e.runningGames&&e.runningGames.length?a("ul",e._l(e.runningGames,(function(e){return a("li",{key:e.translationKey},[a("RouterLink",{attrs:{to:e.url}},[a("span",{directives:[{name:"t",rawName:"v-t",value:e.translationKey,expression:"runningGame.translationKey"}]})])],1)})),0):e._e()]):e._e()],1)],1)],1)},s=[],n=(a("14d9"),a("7f80"));async function o(e){return e=e||"plinko",n["a"].get("/seed/getPair?gameName="+e)}async function r(){return n["a"].get("/seed/getUserPair")}async function l(e,t){return t?n["a"].get(`/seed/rotateSeed?clientSeed=${e}&isUserSeed=true`):n["a"].get("/seed/rotateSeed?clientSeed="+e)}const u={towers:{translationKey:"towers.title",url:"/towers"}};var c={name:"SeedPairModal",props:{open:{type:Boolean,default:!1},name:String,isUserSeed:!1},data(){return{isRotateLoading:!1,isError:!1,errorMessage:"",runningGames:[],nextClientSeed:null,seedPair:{clientSeed:"Loading...",nextGameSeed:"Loading..."},serverHash:"Loading...",nextServerHash:"Loading...",gameVersion:null}},watch:{open(e,t){!t&&e&&this.getInfo()}},methods:{async getInfo(){try{let e;if(this.isUserSeed){const t=await r();e=t.data}else{const t=await o(this.name);e=t.data}this.seedPair=e.pair,this.serverHash=e.serverHash,this.gameVersion=e.gameVersion,this.nextClientSeed=this.makeSeed(),this.isUserSeed&&(this.nextServerHash=e.nextServerHash),this.isError=!1,this.errorMessage="",this.runningGames=[]}catch(e){this.$api.handleError(e)}},async rotateSeed(){this.isRotateLoading=!0;try{const{data:e}=await l(this.nextClientSeed,this.isUserSeed);this.seedPair=e.pair,this.serverHash=e.serverHash,this.isUserSeed&&(this.nextServerHash=e.nextServerHash),this.nextClientSeed=this.makeSeed(),this.isError=!1,this.errorMessage="",this.runningGames=[]}catch(a){var e,t;if("gameIsRunning"===(null===a||void 0===a||null===(e=a.response)||void 0===e||null===(e=e.data)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.type))this.isError=!0,this.errorMessage=this.$t("error.cannot_rotate_seed"),null!==a&&void 0!==a&&null!==(t=a.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&null!==(t=t.params)&&void 0!==t&&null!==(t=t.runningGames)&&void 0!==t&&t.length&&(this.runningGames=a.response.data.params.runningGames.map(e=>u[e]));else this.$api.handleError(a)}finally{this.isRotateLoading=!1}},makeSeed(){return this.generateString(10,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")},generateString(e,t){let a="";const i=t.length;for(let s=0;s<e;s++)a+=t.charAt(Math.floor(Math.random()*i));return a},handlePFClick(){return this.$router.push({path:"/provably-fair/"+this.name})}}},d=c,h=(a("ee01"),a("2877")),m=Object(h["a"])(d,i,s,!1,null,"5f810120",null);t["a"]=m.exports},b6c8:function(e,t,a){},c156:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:["towers-container",e.isMultiview&&"towers-container-multiview"]},[e.isGameLoading?a("BaseLoader",{attrs:{size:3}}):a("div",{staticClass:"towers-game"},[a("div",{staticClass:"towers-controls"},[a("div",{staticClass:"towers-controls-pf"},[a("BaseButton",{attrs:{iconLeft:"scales"},on:{click:e.handleFairnessClick}},[a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.fairness",expression:"'towers.fairness'"}]})]),a("IconButton",{staticClass:"towers-controls-pf-settings",attrs:{icon:"settings-3"},on:{click:function(t){e.isSettingsModalOpen=!0}}})],1),a("div",{staticClass:"towers-controls-difficulties"},[a("div",{staticClass:"towers-controls-difficulty-label"},[a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.difficulties.title",expression:"'towers.difficulties.title'"}]})]),a("div",{staticClass:"towers-controls-difficulties-container"},e._l(e.difficulties,(function(t,i){return a("div",{key:t.key,class:["towers-controls-difficulty",i===e.game.difficulty&&"towers-controls-difficulty-selected"],on:{click:function(t){return e.setDifficulty(i)}}},[a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.difficulties."+t.key,expression:"\n                                    `towers.difficulties.${difficulty.key}`\n                                "}]}),a("div",{staticClass:"towers-controls-difficulty-colors"},[e._l(t.choices-t.bombs,(function(e){return a("div",{key:"tower-"+e,staticClass:"towers-controls-difficulty-colors-tower"})})),e._l(t.bombs,(function(e){return a("div",{key:"bomb-"+e,staticClass:"towers-controls-difficulty-colors-bomb"})}))],2)])})),0)]),a("div",{staticClass:"towers-controls-balance"},[a("BalanceInput",{ref:"balanceInput",attrs:{layout:"vertical-inline",initialValue:e.minBet,minBetBux:e.minBet,hideDropdown:!e.isLoggedIn,forceDisplay:!0,amountLabel:"towers.betAmount"},model:{value:e.betAmount,callback:function(t){e.betAmount=t},expression:"betAmount"}})],1),a("div",{staticClass:"towers-controls-demo"},[a("BaseButton",{attrs:{types:"is-inline",iconLeft:"seo",disabled:e.isDemoBetDisabled},on:{click:e.demoBet}},[e.isDemoActive?a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.stopDemoBet",expression:"'towers.stopDemoBet'"}]}):a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.demoBet",expression:"'towers.demoBet'"}]})])],1)]),a("div",{staticClass:"towers-table"},[a("TowerRounds",{attrs:{game:e.game,difficultyData:e.difficultyData,isBetLoading:e.isBetLoading,winningsByRound:e.winningsByRound},on:{submitBet:e.onSubmitBet}}),a("div",{staticClass:"towers-controls-cashout"},[a("BaseButton",{attrs:{types:"is-red",loading:e.isCashoutLoading||e.isCreateGameLoading,disabled:e.isActionButtonDisabled},on:{click:e.action}},[a("transition",{attrs:{name:"slide",mode:"out-in"}},[e.isDemoActive?a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.demoGameActive",expression:"'towers.demoGameActive'"}]}):e.isLoggedIn?"new"===e.game.status?a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.start",expression:"'towers.start'"}],key:"placeABet"}):"ended"===e.game.status?a("span",{directives:[{name:"t",rawName:"v-t",value:e.gameEndedActionMessage,expression:"gameEndedActionMessage"}],key:"gameEnded"}):0===e.game.currentRound?a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.makeAChoice",expression:"'towers.makeAChoice'"}],key:"makeAChoice"}):a("span",{key:"cashout",staticClass:"towers-controls-cashout-text"},[a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.cashout",expression:"'towers.cashout'"}]}),a("BalanceCounter",{attrs:{value:e.cashoutValue,icon:e.game.balance}})],1):a("span",{directives:[{name:"t",rawName:"v-t",value:"navbar.login",expression:"'navbar.login'"}]})])],1)],1)],1)])],1),a("TopWins",{attrs:{gameId:"towers",gameType:"house-games"}}),e.isMultiview?e._e():a("ContentArticle",{staticClass:"base-container",attrs:{"article-key":"towers"}}),a("SeedPairModal",{attrs:{open:e.isSeedPairModalOpen,name:"towers",isUserSeed:!0},on:{close:function(t){e.isSeedPairModalOpen=!1}}}),a("BaseModal",{staticClass:"towers-settings-modal",attrs:{open:e.isSettingsModalOpen},on:{close:function(t){e.isSettingsModalOpen=!1}}},[a("BaseCard",[a("BaseCardHeader",[a("span",{directives:[{name:"t",rawName:"v-t",value:"towers.settings.title",expression:"'towers.settings.title'"}]})]),a("BaseCardContent",[a("div",{staticClass:"towers-setting"},[a("div",{directives:[{name:"t",rawName:"v-t",value:"towers.settings.sounds.title",expression:"'towers.settings.sounds.title'"}],staticClass:"towers-setting-label"}),a("BaseToggle",{staticClass:"towers-setting-toggle",attrs:{checked:e.shouldSoundsBePlayed},on:{toggle:function(){return e.toggleSoundSetting()}}})],1)])],1)],1)],1)},s=[],n=(a("14d9"),a("901e")),o=a.n(n),r=a("2f62"),l=a("3c8c"),u=a("0bae"),c=a("2331"),d=a("3c11"),h=a("92cf"),m=a("d78c"),g=a("7f80");async function p({betAmount:e,difficulty:t,balance:a}){return g["a"].post("/towers",{betAmount:e,difficulty:t,balance:a})}async function v({gameId:e,round:t}){return g["a"].post("/towers/cashout",{gameId:e,round:t})}async function f({gameId:e,round:t,choice:a}){return g["a"].post("/towers/bet",{gameId:e,round:t,choice:a})}async function B(){return g["a"].get("/towers")}const y=1666,b={cashout:"/static/sounds/cashout.wav",win:"/static/sounds/win.wav",lose:"/static/sounds/lose.mp3"},w="towers:settings:sounds",C={difficulty:0,currentRound:0,rounds:[],status:"new",totalRounds:10,isWinner:!1};var S={name:"Towers",components:{TopWins:d["a"],SeedPairModal:h["a"],BalanceInput:l["a"],BalanceCounter:u["a"],TowerRounds:c["a"]},beforeMount(){this.handleSocketMessages()},beforeDestory(){this.removeSocketListener()},mounted(){this.getInfo()},data(){return{isDemoActive:!1,game:{...C},betAmount:y,isGameLoading:!1,isCreateGameLoading:!1,isCashoutLoading:!1,isBetLoading:!1,difficulties:[],minBet:0,isSeedPairModalOpen:!1,isSettingsModalOpen:!1,shouldSoundsBePlayed:!localStorage.getItem(w)||"true"===localStorage.getItem(w)}},computed:{...Object(r["e"])("user",{conversionBalanceType:"conversionBalanceType"}),...Object(r["c"])("user",["isLoggedIn"]),...Object(r["e"])("site",["isMultiview","shouldShowTransitions"]),isActionButtonDisabled(){return!!this.isDemoActive||!!this.isLoggedIn&&("new"===this.game.status||"ended"===this.game.status?!this.betAmount||!(null!==(e=this.betAmount)&&void 0!==e&&e.amount):"running"===this.game.status?0===this.game.currentRound:void 0);var e},cashoutValue(){return"running"!==this.game.status||0===this.game.currentRound?0:this.game.rounds[this.game.currentRound-1].payout},difficultyData(){return this.difficulties.length?"undefined"===this.game.difficulty?{}:this.difficulties[this.game.difficulty]:{}},roundMultiplier(){const e=this.difficultyData.choices/(this.difficultyData.choices-this.difficultyData.bombs),t=1-this.game.houseEdge;return new o.a(e).times(t).toNumber()},winningsByRound(){var e,t;let a=[];if(!this.game)return a;const i="running"===(null===(e=this.game)||void 0===e?void 0:e.status)&&(null===(t=this.game)||void 0===t?void 0:t.betAmount)||this.betAmount.amount||y;for(let s=1;s<=this.game.totalRounds;s++)a.push({value:parseInt(i*this.roundMultiplier**s),multiplier:Math.floor(this.roundMultiplier**s*1e3)/1e3});return a},isDemoBetDisabled(){return!!this.game._id&&"ended"!==this.game.status&&!this.isDemoActive},gameEndedActionMessage(){return this.game.isDemo?this.game.isWinner?"towers.gameEndedWonReal":"towers.gameEndedLostReal":this.game.isWinner?"towers.gameEndedWon":"towers.gameEndedLost"}},methods:{async getInfo(){this.isGameLoading=!0;try{const e=await B(),{game:t,difficulties:a,houseEdge:i,minBet:s}=e.data;this.difficulties=a,this.minBet=s,t?this.game=t:(this.resetGameToDefault(),this.$set(this.game,"houseEdge",i))}catch(e){this.$api.handleError(e)}finally{this.isGameLoading=!1}},async action(){return this.isLoggedIn?"running"===this.game.status?this.cashout():"ended"===this.game.status||"new"===this.game.status?this.createGame():void 0:this.$router.push({path:"/auth/login"})},async createGame(){if(this.isLoggedIn){this.isCreateGameLoading=!0;try{const e=await p({betAmount:this.betAmount.amount,difficulty:this.game.difficulty,balance:this.betAmount.balanceType}),t=null===e||void 0===e?void 0:e.data;t&&(this.game=t,this.$store.commit("user/increaseBalance",{type:this.game.balance,amount:-this.game.betAmount},{root:!0}))}catch(e){this.$api.handleError(e)}finally{this.isCreateGameLoading=!1}}},async cashout(){this.isCashoutLoading=!0;try{const t=await v({gameId:this.game._id,round:this.game.currentRound}),a=null===t||void 0===t?void 0:t.data;var e;if(a)this.game=a,null!==(e=this.betAmount)&&void 0!==e&&e.amount||this.setBetAmount(this.game.betAmount),this.$store.commit("user/increaseBalance",{type:this.game.balance,amount:this.game.wonAmount},{root:!0}),this.playNotificationSound("cashout")}catch(t){this.$api.handleError(t)}finally{this.isCashoutLoading=!1}},onSubmitBet({choice:e,round:t}){return this.bet(e,t)},submitDemoBet(e,t){const a=this.getRandomBombs();if(this.game.rounds[t]={choice:e,bombs:a,payout:this.winningsByRound[t].value},1===a[e]){if(this.game.currentRound!==this.game.totalRounds-1)for(let t=this.game.currentRound+1;t<=this.game.totalRounds-1;t++)this.game.rounds[t]={choice:e,bombs:this.getRandomBombs(),payout:this.winningsByRound[t].value};this.$set(this.game,"isWinner",!1),this.game.status="ended",this.isDemoActive=!1,this.playNotificationSound("lose")}else this.playNotificationSound("win"),this.game.currentRound===this.game.totalRounds-1?(this.game.status="ended",this.game.isWinner=!0,this.isDemoActive=!1):this.game.currentRound++},async bet(e,t){if(this.isDemoActive)return this.submitDemoBet(e,t);this.isBetLoading=!0;try{const i=await f({gameId:this.game._id,choice:e,round:t}),s=(null===i||void 0===i?void 0:i.data)||{};var a;if(s)if(this.game=s,this.game.isLost?this.playNotificationSound("lose"):this.playNotificationSound("win"),"ended"===this.game.status)null!==(a=this.betAmount)&&void 0!==a&&a.amount||this.setBetAmount(this.game.betAmount),this.game.isWinner&&this.game.wonAmount&&this.$store.commit("user/increaseBalance",{type:this.game.balance,amount:this.game.wonAmount},{root:!0})}catch(i){this.$api.handleError(i)}finally{this.isBetLoading=!1}},isChoiceSelected(e,t){if(!this.game)return;const a=this.game.rounds[e];return a?a.choice===t:void 0},setBetAmount(e){var t;let a=e;this.conversionBalanceType&&"bux"!==(null===(t=this.conversionBalanceType)||void 0===t?void 0:t.toLowerCase())&&(a=m["a"].amount(e,{decimal:!0}).from("bux").to(this.conversionBalanceType)),this.$refs.balanceInput.setValue(a)},isChoiceWinner(e,t){if(!this.game)return;const a=this.game.rounds[e];return a?1!==a.bombs[t]:void 0},setDifficulty(e){if("running"===this.game.status)return;const t=this.game.houseEdge;this.resetGameToDefault(),this.$set(this.game,"houseEdge",t),this.game.difficulty=e},resetGameToDefault(){var e;const t=null===(e=this.game)||void 0===e?void 0:e.houseEdge;this.game={...C},t&&this.$set(this.game,"houseEdge",t)},removeSocketListener(){this.$socket.off("update-settings",this.handleSettingsUpdate)},handleSocketMessages(){this.$socket.on("update-settings",this.handleSettingsUpdate)},handleSettingsUpdate(e){let t;try{var a;t=JSON.parse(e);const i=null===(a=t)||void 0===a?void 0:a.find(e=>"towers-house-edge"===e.name);i&&"new"===this.game.status&&this.$set(this.game,"houseEdge",i.value)}catch(i){console.error(i)}},playNotificationSound(e){if(this.shouldSoundsBePlayed&&e&&b[e]){var t=new Audio(b[e]);t.volume=.5,t.play()}},handleFairnessClick(){this.isLoggedIn?this.isSeedPairModalOpen=!0:this.$router.push("/provably-fair/towers")},toggleSoundSetting(){this.shouldSoundsBePlayed=!this.shouldSoundsBePlayed,localStorage.setItem(w,this.shouldSoundsBePlayed)},demoBet(){if(this.isDemoActive)return this.resetGameToDefault(),this.isDemoActive=!1,this.$set(this.game,"isDemo",!1),void this.playNotificationSound("cashout");this.isDemoActive=!0,this.game.status="running",this.game.betAmount=166600,this.game.rounds=[],this.game.currentRound=0,this.game.isWinner=!1,this.$set(this.game,"isDemo",!0)},getRandomBombs(){const e=Math.random(),t=this.game.difficulty;return [0, 0, 1]}}},x=S,L=(a("3273"),a("2877")),k=Object(L["a"])(x,i,s,!1,null,"bba5f68e",null);t["default"]=k.exports},ee01:function(e,t,a){"use strict";a("2148")}}]);